
<!DOCTYPE html>
<html lang="en">
<head>
  
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Rdf4j Binary RDF Format | The Eclipse Foundation</title>
<meta property="og:title" content="Rdf4j Binary RDF Format | The Eclipse Foundation" />
<meta name="twitter:title" content="Rdf4j Binary RDF Format | The Eclipse Foundation" />
<meta name="description" content="RDF4J Binary RDF Format RDF4J supports reading and writing a custom binary RDF serialization format. Its main features are reduced parsing overhead and minimal memory requirements (for handling really long literals, amongst other things).
MIME Content Type RDF4J assigns the content type application/x-binary-rdf to its format.
Overall design Results encoded in the RDF4J Binary RDF format consist of a header followed by zero or more records, and closes with an END_OF_DATA marker (see below).">
<meta property="og:description" content="RDF4J Binary RDF Format RDF4J supports reading and writing a custom binary RDF serialization format. Its main features are reduced parsing overhead and minimal memory requirements (for handling really long literals, amongst other things).
MIME Content Type RDF4J assigns the content type application/x-binary-rdf to its format.
Overall design Results encoded in the RDF4J Binary RDF format consist of a header followed by zero or more records, and closes with an END_OF_DATA marker (see below).">
<meta name="twitter:description" content="RDF4J Binary RDF Format RDF4J supports reading and writing a custom binary RDF serialization format. Its main features are reduced parsing overhead and minimal memory requirements (for handling really …">
<meta name="author" content="Christopher Guindon"/>
<link href='https://rdf4j.eclipse.org/images/favicon.png' rel='icon' type='image/x-icon'/>
<meta property="og:image" content="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" />
<meta name="twitter:image" content="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@EclipseFdn" />
<meta name="twitter:creator" content="@EclipseFdn" />
<meta property="og:url" content="https://rdf4j.eclipse.org/documentation/rdf4j-binary/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Eclipse rdf4j" />
<meta name="keywords" content="hugo, solstice, eclipse foundatiou">


<meta name="generator" content="Hugo 0.40.1" />
<link rel="canonical" href="https://rdf4j.eclipse.org/documentation/rdf4j-binary/" />
<link rel="alternate" href="https://rdf4j.eclipse.org/index.xml" type="application/rss+xml" title="Eclipse rdf4j">

<link rel="stylesheet" href="https://eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/quicksilver.min.css">
<link rel="stylesheet" href="/css/rdf4j.css">


  
<link href="//fonts.googleapis.com/css?family=Libre+Franklin:400,700,300,600,100" rel="stylesheet" type="text/css"/>

  
</head>
<body>
  
<a class="sr-only" href="#content">Skip to main content</a>
<header class="header-wrapper" id="header-wrapper">
  

<div class="clearfix toolbar-container-wrapper">
  <div class="container">
    <div class="text-right toolbar-row row hidden-print">
      <div class="col-md-24 row-toolbar-col">
        <ul class="list-inline">
          <li><a href="https://accounts.eclipse.org/user/edit" class="" data-tab-destination="tab-profile"><i class="fa fa-edit fa-fw"></i> Edit my account</a></li>
          <li><a class="toolbar-link toolbar-manage-cookies dropdown-toggle"><i class="fa fa-wrench"></i> Manage Cookies</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row" id="header-row">
    <div class="col-sm-5 col-md-4" id="header-left">
      <div class="wrapper-logo-default">
          <a title="Eclipse rdf4j" href="https://rdf4j.eclipse.org/">
            <img width="140" class="logo-eclipse-default img-responsive hidden-xs" src="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" alt="Eclipse rdf4j" />
          </a>
        
      </div>
    </div>
    
    <div class="col-sm-19 col-md-20 reset margin-top-10" id="main-menu-wrapper">
    
      <div class="navbar yamm" id="main-menu">
        <div class="navbar-collapse collapse reset float-right" id="navbar-main-menu">
          <ul class="nav navbar-nav">
            



<li>
  <a class="" href="/news/">
  
  News
  </a>
  
</li>


<li class="dropdown">
  <a href="#" data-toggle="dropdown" class="dropdown-toggle">
    
    
    <span>About</span>
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    
    <li><a href="/about/">Eclipse rdf4j</a> </li>
    
    <li><a href="/databases/">Rdf4j databases</a> </li>
    
    <li><a href="/related/">Related projects</a> </li>
    
  </ul>
  
</li>


<li>
  <a class="" href="/documentation/">
  
  Documentation
  </a>
  
</li>


<li>
  <a class="" href="/download/">
  
  Download
  </a>
  
</li>


<li>
  <a class="" href="/support/">
  
  Support
  </a>
  
</li>





          </ul>
        </div>
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main-menu">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <div class="wrapper-logo-mobile">
            
              <a class="navbar-brand visible-xs" title="Eclipse rdf4j" href="https://rdf4j.eclipse.org/">
                <img width="140" class="logo-eclipse-default-mobile img-responsive" src="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" alt="Eclipse rdf4j" />
              </a>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  


</header>

  
<section class="default-breadcrumbs hidden-print" id="breadcrumb">
  <div class="container">
  <h3 class="sr-only">Breadcrumbs</h3>
  <div class="row">
    <div class="col-sm-24">
      <ol class="breadcrumb">
        
      
      
      
      
      
      <li>
        <a href="https://rdf4j.eclipse.org/">Eclipse rdf4j</a>
      </li>
      
      
      <li>
        <a href="https://rdf4j.eclipse.org/documentation/">Documentation</a>
      </li>
      
      
      <li class="active">
        <a href="https://rdf4j.eclipse.org/documentation/rdf4j-binary/">Rdf4j Binary RDF Format</a>
      </li>
      
      </ol>
      
    </div>
  </div>
</section>

  
<main>
  <div class="container">
    
    <div class="row">
      <div class="col-md-18 padding-bottom-30">
        
        
        

<h1 id="rdf4j-binary-rdf-format">RDF4J Binary RDF Format</h1>

<p>RDF4J supports reading and writing a custom binary RDF serialization format. Its main features are reduced parsing overhead and minimal memory requirements (for handling really long literals, amongst other things).</p>

<h1 id="mime-content-type">MIME Content Type</h1>

<p>RDF4J assigns the content type <code>application/x-binary-rdf</code> to its format.</p>

<h1 id="overall-design">Overall design</h1>

<p>Results encoded in the RDF4J Binary RDF format consist of a header followed by zero or more records, and closes with an <code>END_OF_DATA</code> marker (see below). Values are stored in network order (Big-Endian).</p>

<p>All string values use UTF-16 encoding. Reference ids are assigned to recurring values to avoid having to repeat long strings.</p>

<h1 id="header">Header</h1>

<p>The header is 8 bytes long:</p>

<ul>
<li>Bytes 0-3 contain a magic number, namely the ASCII codes for the string “BRDF”, which stands for Binary RDF.</li>
<li>Bytes 4-7 specify the format version (a 4-byte signed integer).</li>
</ul>

<p>For example, a header for a result in format version 1 will look like this:</p>

<pre><code>  byte: 0  1  2  3 |  4  5  6  7 | 
-------------------+-------------+
 value: B  R  D  F |  0  0  0  1 |
</code></pre>

<h1 id="content-records">Content records</h1>

<p>Zero or more records follow after the header. Each record can be a namespace declaration, a comment, a value reference declaration, or a statement.</p>

<p>Each record starts with a record type marker (a single byte). The following record types are defined in the current format:</p>

<ul>
<li><code>NAMESPACE_DECL</code> (byte value: 0):
This indicates a namespace declaration record.</li>
<li><code>STATEMENT</code> (byte value: 1):
This indicates an RDF statement record.</li>
<li><code>COMMENT</code> (byte value: 2):
This indicates a comment record.</li>
<li><code>VALUE_DECL</code> (byte value: 3):
This indicates a value declaration.</li>
<li><code>END_OF_DATA</code> (byte value: 127):
This indicates the end of the data stream has been reached.</li>
</ul>

<h2 id="strings">Strings</h2>

<p>All strings are encoded as UTF-16 encoded byte arrays. A String is preceeded by a 4-byte signed integer that encodes the length of the string (specifically, it records the number of Unicode code units). For example, the string ‘foo’ will be encoded as follows:</p>

<pre><code> byte: 0 1 2 3 | 4 6 8 |
---------------+-------+
value: 0 0 0 3 | f o o |
</code></pre>

<h2 id="rdf-values">RDF Values</h2>

<p>Each RDF value type has its own specific 1-byte record type marker:</p>

<ul>
<li><code>NULL_VALUE</code> (byte value: 0)
marks an empty RDF value (this is used, for example, in encoding of context in statements)</li>
<li><code>URI_VALUE</code> (byte value: 1)
marks a URI value</li>
<li><code>BNODE_VALUE</code> (byte value: 2)
marks a blank node value</li>
<li><code>PLAIN_LITERAL_VALUE</code> (byte value: 3)
marks a plain literal value</li>
<li><code>LANG_LITERAL_VALUE</code> (byte value: 4)
marks a language-tagged literal value</li>
<li><code>DATATYPE_LITERAL_VALUE</code> (byte value: 5)
marks a datatyped literal value</li>
</ul>

<h3 id="uris">URIs</h3>

<p>URIs are recorded by the <code>URI_VALUE</code> marker followed by the URI encoded as a string.</p>

<h3 id="blank-nodes">Blank nodes</h3>

<p>Blank nodes are recorded by the <code>BNODE_VALUE</code> marker followed by the id of the blank node encoded as a string.</p>

<h3 id="literals">Literals</h3>

<p>Depending on the specific literal type (plain, language-tagged, datatyped), a literal is recorded by one of the markers <code>PLAIN_LITERAL_VALUE</code>, <code>LANG_LITERAL_VALUE</code> or <code>DATATYPE_LITERAL_VALUE</code>. This is followed by the lexical label of the literal as a string, optionally followed by either a language tag encoded as a string value or a datatype encoded as a string.</p>

<h2 id="value-reference-declaration-records">Value reference declaration records</h2>

<p>To enable further compression of the byte stream, the Binary RDF format enables encoding of reference-identifiers for often-repeated RDF values. A value reference declaration starts with a <code>VALUE_DECL</code> record marker (1 byte, value 3), followed by a 4-byte signed integer that encodes the reference id. This is followed by the actual value, encoded as an RDF value (see above).</p>

<p>For example, a declaration that assigns id 42 to the URI ‘<a href="http://example.org/HHGTTG’" target="_blank">http://example.org/HHGTTG’</a> will look like this:</p>

<pre><code>  byte: 0 | 1 2 3 4 | 5 | 6 7 8 9 | 10 12 14 16 18 (etc) | 
----------+---------+---+---------+----------------------+
 value: 3 | 0 0 0 42| 1 | 0 0 0 25| h  t  t  p  :  (etc) |
</code></pre>

<p>Explanation: byte 0 marks the record as a <code>VALUE_DECL</code>, bytes 1-4 encode the reference id, byte 5 encodes the value type (<code>URI_VALUE</code>), bytes 6-9 encode the length of the string value, bytes 10 and further encode the actual string value as an UTF-16 encoded byte array.</p>

<p>Note that the format allows the same reference id to be assigned more than once. When a second value declaration occurs, it effectively overwrites a previous declaration, reassigning the id to a new value for all following statements.</p>

<h2 id="namespace-records">Namespace records</h2>

<p>A namespace declaration is recorded by the <code>NAMESPACE_DECL marker</code>. Next follows the namespace prefix, as a string, then followed by the namespace URI, as a string.</p>

<p>For example, a namespace declaration record for prefix ‘ex’ and namespace uri ‘<a href="http://example.org/’" target="_blank">http://example.org/’</a> will look like this:</p>

<pre><code>  byte: 0 | 1 2 3 4 | 5 6 | 7 8 9 10 | 11 13 15 17 19 (etc) |
----------+---------+-----+----------+----------------------+
 value: 0 | 0 0 0 2 | e x | 0 0 0 19 | h  t  t  p  :  (etc) |
</code></pre>

<h2 id="comment-records">Comment records</h2>

<p>A comment is recorded by the <code>COMMENT</code> marker, followed by the comment text encoded as a string.</p>

<p>For example, a record for the comment ‘example’ will look like this:</p>

<pre><code>  byte: 0 | 1 2 3 4 | 5 7 9 11 13 15 17 |
----------+---------+-------------------+
 value: 2 | 0 0 0 7 | e x a m  p  l  e  |
</code></pre>

<h2 id="statement-records">Statement records</h2>

<p>Each statement record starts with a <code>STATEMENT</code> marker (1 byte, value 1). For the encoding of the statement’s subject, predicate, object and context, either the RDF value is encoded directly, or a previously assigned value reference (see section 2.3) is reused. A Value references is recorded with the <code>VALUE_REF</code> marker (1 byte, value 6), followed by the reference id as a 4-byte signed integer.</p>

<h3 id="an-example-statement">An example statement</h3>

<p>Consider the following RDF statement:</p>

<pre><code>&lt;http://example.org/George&gt; &lt;http://example.org/name&gt; &quot;George&quot; .
</code></pre>

<p>Assume that the subject and predicate previously been assigned reference ids,
(42 and 43 respecively). The object value has not been assigned a reference id.</p>

<p>This statement would then be recorded as follows:</p>

<pre><code> byte: 0 | 1 | 2 3 4 5 | 6 | 7 8 9 10| 11 | 12 13 14 15 | 16 18 20 22 24 26 | 28 |
---------+---+---------+---+---------+----+-------------+-------------------+----+
value: 1 | 6 | 0 0 0 42| 6 | 0 0 0 43|  3 |  0  0  0  5 |  G  e  o  r  g  e |  0 |
</code></pre>

<p>Explanation: byte 0 marks the record as a <code>STATEMENT</code>. Byte 1 marks the subject of the statement as a <code>VALUE_REF</code>. Bytes 2-5 encode the reference id of the subject. Byte 6 marks the predicate of the statement as a <code>VALUE_REF</code>. Byte 7-10 encode the reference id of the predicate. Byte 11 marks the obect of the statement as a <code>PLAIN_LITERA</code>L value, bytes 12-15 encode the length of the lexical value of the literal, and bytes 16-26 encode the literal’s lexical value as a UTF-16 encoded byte array. Finally, byte 28 marks the context field of the statement as a <code>NULL_VALUE</code>.</p>

<h1 id="buffering-and-value-reference-handling">Buffering and value reference handling</h1>

<p>The binary RDF format enables declaration of value references for more compressed representation of often-repeated values.</p>

<p>A binary RDF producer may choose to introduce a reference for every RDF value. This is a simple approach, but it produces a suboptimal compression (because for values which occur only once, direct encoding of the value uses fewer bytes than introducing a reference for it).</p>

<p>Another approach is to introduce a buffered writing strategy: statements to be serialized are put on a queue with a certain capacity, and for each RDF value in these queued statements the number of occurrences in the queue is determined. As the queue is emptied and each statement is serialized, all values that occur more than once in the queue are assigned a reference id. This is, in fact, the strategy employed by the Rio Writer.</p>

<p>It is also important to note that reference ids are not necessarily global over the entire document: ids are assigned on the basis of number of occurrences of a value in the current statement queue. If that number drops to zero, the reference id for that value can be ‘recycled’, that is, reassigned to another value. This ensures that we never run out of reference ids, even for very large datasets.</p>
  
        
      </div>
      <div class="col-md-6  padding-bottom-30 padding-top-10">
        <b>Table of Contents</b>
        <nav id="TableOfContents">
<ul>
<li><a href="#rdf4j-binary-rdf-format">RDF4J Binary RDF Format</a></li>
<li><a href="#mime-content-type">MIME Content Type</a></li>
<li><a href="#overall-design">Overall design</a></li>
<li><a href="#header">Header</a></li>
<li><a href="#content-records">Content records</a>
<ul>
<li><a href="#strings">Strings</a></li>
<li><a href="#rdf-values">RDF Values</a>
<ul>
<li><a href="#uris">URIs</a></li>
<li><a href="#blank-nodes">Blank nodes</a></li>
<li><a href="#literals">Literals</a></li>
</ul></li>
<li><a href="#value-reference-declaration-records">Value reference declaration records</a></li>
<li><a href="#namespace-records">Namespace records</a></li>
<li><a href="#comment-records">Comment records</a></li>
<li><a href="#statement-records">Statement records</a>
<ul>
<li><a href="#an-example-statement">An example statement</a></li>
</ul></li>
</ul></li>
<li><a href="#buffering-and-value-reference-handling">Buffering and value reference handling</a></li>
</ul>
</nav>
      </div>
    </div>
    
  </div>
</main>

  
  
<p id="back-to-top">
  <a class="visible-xs" href="#top">Back to the top</a>
</p>
<footer id="solstice-footer">
  <div class="container">
    <div class="row">
      <section class="col-sm-6 hidden-print" id="footer-eclipse-foundation">
        <h2 class="section-title">Eclipse Foundation</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/org/">About Us</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/contact.php">Contact Us</a></li>
          <li><a href="https://www.eclipse.org/donate">Donate</a></li>
          <li><a href="https://www.eclipse.org/org/documents/">Governance</a></li>
          <li><a href="https://www.eclipse.org/artwork/">Logo and Artwork</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/directors.php">Board of Directors</a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-legal">
        <h2 class="section-title">Legal</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="https://www.eclipse.org/org/documents/edl-v10.php">Eclipse Distribution License</a></li>
          <li><a href="https://www.eclipse.org/legal/">Legal Resources </a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-useful-links">
        <h2 class="section-title">Useful Links</h2>
        <ul class="nav">
          <li><a href="https://github.com/eclipse/rdf4j/issues/">Report a Bug</a></li>
          <li><a href="/documentation/">Documentation</a></li>
          <li><a href="https://github.com/eclipse/rdf4j/blob/master/.github/CONTRIBUTING.md">How to Contribute</a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-other">
        <h2 class="section-title">Other</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/ide/">IDE and Tools</a></li>
          <li><a href="https://www.eclipse.org/projects">Community of Projects</a></li>
          <li><a href="https://www.eclipse.org/org/workinggroups/">Working Groups</a></li>
          <li><a href="https://www.eclipse.org/org/research/">Research@Eclipse</a></li>
          <li><a href="https://status.eclipse.org">Service Status</a></li>
        </ul>
      </section>
      <div class="col-sm-24 margin-top-20">
        <div class="row">
          <div id="copyright" class="col-md-16">
            <p id="copyright-text">Copyright &copy; Eclipse Foundation, Inc. All Rights Reserved.</p>
          </div>
          
        </div>
      </div>
      <a href="#" class="scrollup">Back to the top</a>
    </div>
  </div>
</footer>

<script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/main.min.js"></script>

</body>
</html>

  
</body>
</html>

