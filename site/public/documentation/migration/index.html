
<!DOCTYPE html>
<html lang="en">
<head>
  
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Sesame to Eclipse rdf4j migration | The Eclipse Foundation</title>
<meta property="og:title" content="Sesame to Eclipse rdf4j migration | The Eclipse Foundation" />
<meta name="twitter:title" content="Sesame to Eclipse rdf4j migration | The Eclipse Foundation" />
<meta name="description" content="Sesame to Eclipse rdf4j migration guide Eclipse rdf4j is the successor of the OpenRDF Sesame project. The Rdf4j framework and tools offer the same functionality, and will continue to be maintained and improved by the same team of developers as Sesame was, under Eclipse stewardship. For any users who wish to migrate their existing projects from Sesame to Rdf4j (and we certainly urge you to do so quickly), here’s an overview of what has changed.">
<meta property="og:description" content="Sesame to Eclipse rdf4j migration guide Eclipse rdf4j is the successor of the OpenRDF Sesame project. The Rdf4j framework and tools offer the same functionality, and will continue to be maintained and improved by the same team of developers as Sesame was, under Eclipse stewardship. For any users who wish to migrate their existing projects from Sesame to Rdf4j (and we certainly urge you to do so quickly), here’s an overview of what has changed.">
<meta name="twitter:description" content="Sesame to Eclipse rdf4j migration guide Eclipse rdf4j is the successor of the OpenRDF Sesame project. The Rdf4j framework and tools offer the same functionality, and will continue to be maintained and …">
<meta name="author" content="Christopher Guindon"/>
<link href='https://rdf4j.eclipse.org/images/favicon.png' rel='icon' type='image/x-icon'/>
<meta property="og:image" content="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" />
<meta name="twitter:image" content="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@EclipseFdn" />
<meta name="twitter:creator" content="@EclipseFdn" />
<meta property="og:url" content="https://rdf4j.eclipse.org/documentation/migration/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Eclipse rdf4j" />
<meta name="keywords" content="hugo, solstice, eclipse foundatiou">


<meta name="generator" content="Hugo 0.40.1" />
<link rel="canonical" href="https://rdf4j.eclipse.org/documentation/migration/" />
<link rel="alternate" href="https://rdf4j.eclipse.org/index.xml" type="application/rss+xml" title="Eclipse rdf4j">

<link rel="stylesheet" href="https://eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/quicksilver.min.css">
<link rel="stylesheet" href="/css/rdf4j.css">


  
<link href="//fonts.googleapis.com/css?family=Libre+Franklin:400,700,300,600,100" rel="stylesheet" type="text/css"/>

  
</head>
<body>
  
<a class="sr-only" href="#content">Skip to main content</a>
<header class="header-wrapper" id="header-wrapper">
  

<div class="clearfix toolbar-container-wrapper">
  <div class="container">
    <div class="text-right toolbar-row row hidden-print">
      <div class="col-md-24 row-toolbar-col">
        <ul class="list-inline">
          <li><a href="https://accounts.eclipse.org/user/edit" class="" data-tab-destination="tab-profile"><i class="fa fa-edit fa-fw"></i> Edit my account</a></li>
          <li><a class="toolbar-link toolbar-manage-cookies dropdown-toggle"><i class="fa fa-wrench"></i> Manage Cookies</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row" id="header-row">
    <div class="col-sm-5 col-md-4" id="header-left">
      <div class="wrapper-logo-default">
          <a title="Eclipse rdf4j" href="https://rdf4j.eclipse.org/">
            <img width="140" class="logo-eclipse-default img-responsive hidden-xs" src="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" alt="Eclipse rdf4j" />
          </a>
        
      </div>
    </div>
    
    <div class="col-sm-19 col-md-20 reset margin-top-10" id="main-menu-wrapper">
    
      <div class="navbar yamm" id="main-menu">
        <div class="navbar-collapse collapse reset float-right" id="navbar-main-menu">
          <ul class="nav navbar-nav">
            



<li>
  <a class="" href="/news/">
  
  News
  </a>
  
</li>


<li class="dropdown">
  <a href="#" data-toggle="dropdown" class="dropdown-toggle">
    
    
    <span>About</span>
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    
    <li><a href="/about/">Eclipse rdf4j</a> </li>
    
    <li><a href="/databases/">Rdf4j databases</a> </li>
    
    <li><a href="/related/">Related projects</a> </li>
    
  </ul>
  
</li>


<li>
  <a class="" href="/documentation/">
  
  Documentation
  </a>
  
</li>


<li>
  <a class="" href="/download/">
  
  Download
  </a>
  
</li>


<li>
  <a class="" href="/support/">
  
  Support
  </a>
  
</li>





          </ul>
        </div>
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main-menu">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <div class="wrapper-logo-mobile">
            
              <a class="navbar-brand visible-xs" title="Eclipse rdf4j" href="https://rdf4j.eclipse.org/">
                <img width="140" class="logo-eclipse-default-mobile img-responsive" src="https://rdf4j.eclipse.org/images/rdf4j-logo-orange-114.png" alt="Eclipse rdf4j" />
              </a>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  


</header>

  
<section class="default-breadcrumbs hidden-print" id="breadcrumb">
  <div class="container">
  <h3 class="sr-only">Breadcrumbs</h3>
  <div class="row">
    <div class="col-sm-24">
      <ol class="breadcrumb">
        
      
      
      
      
      
      <li>
        <a href="https://rdf4j.eclipse.org/">Eclipse rdf4j</a>
      </li>
      
      
      <li>
        <a href="https://rdf4j.eclipse.org/documentation/">Documentation</a>
      </li>
      
      
      <li class="active">
        <a href="https://rdf4j.eclipse.org/documentation/migration/">Sesame to Eclipse rdf4j migration</a>
      </li>
      
      </ol>
      
    </div>
  </div>
</section>

  
<main>
  <div class="container">
    
    <div class="row">
      <div class="col-md-18 padding-bottom-30">
        
        
        

<h1 id="sesame-to-eclipse-rdf4j-migration-guide">Sesame to Eclipse rdf4j migration guide</h1>

<p>Eclipse rdf4j is the successor of the OpenRDF Sesame project. The Rdf4j framework and tools offer the same functionality, and will continue to be maintained and improved by the same team of developers as Sesame was, under Eclipse stewardship. For any users who wish to migrate their existing projects from Sesame to Rdf4j (and we certainly urge you to do so quickly), here’s an overview of what has changed.</p>

<h1 id="migrating-from-sesame-4">Migrating from Sesame 4</h1>

<p>The Rdf4j 2.0 code is based off of the latest stable Sesame release, 4.1.2. This means that migrating from Sesame 4 to Rdf4j 2 is fairly straightforward.</p>

<h2 id="changes-for-java-programmers">Changes for Java Programmers</h2>

<h3 id="maven-artifacts">Maven artifacts</h3>

<p>All Rdf4j Maven artifacts have a new groupId as well as a new artifactId. Fortunately, the rename is very simple:</p>

<ul>
<li>the groupId for all artifacts has changed from <code>org.openrdf.sesame</code> to <code>org.eclipse.rdf4j</code>;</li>
<li>the artifactIds all have a different name prefix: <code>sesame-&lt;...&gt;</code> has become <code>rdf4j-&lt;...&gt;</code>.</li>
</ul>

<p>For example, the Maven artifact for the Repository API in Sesame was:</p>

<pre><code>&lt;dependency&gt;
   &lt;groupId&gt;org.openrdf.sesame&lt;/groupId&gt;
   &lt;artifactId&gt;sesame-repository-api&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

<p>In Rdf4j, this same artifact is identified as follows:</p>

<pre><code>&lt;dependency&gt;
   &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;
   &lt;artifactId&gt;rdf4j-repository-api&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

<h3 id="package-renaming">Package renaming</h3>

<p>Although Java class and method names have (almost) all remained the same, the package names of all Rdf4j code has been changed. To upgrade your Java code to use these new package names, you will need to do the following replacements:</p>

<ul>
<li><code>org.openrdf.*</code> becomes <code>org.eclipse.rdf4j.*</code></li>
<li><code>info.aduna.*</code> becomes <code>org.eclipse.rdf4j.common.*</code></li>
</ul>

<p>If you are using the Eclipse IDE, a simple way to achieve this is to make sure your project has the new Rdf4j libraries on the build path (and the old Sesame libraries are removed), and then use “Source” -&gt; “Organize imports” (Ctrl+Shift+O) to replace old package names with new ones.</p>

<p>Note that in some cases Eclipse may need you to decide between two or more possibilities. In this case a dialog will pop up, and you can pick the correct candidate.</p>

<p>Alternatively, you can of course just run a global search-and-replace over your code to update your import statements.</p>

<h2 id="upgrading-sesame-server-to-rdf4j-server">Upgrading Sesame Server to Rdf4j Server</h2>

<p>Sesame Server is now called Rdf4j Server. When upgrading Sesame Server to Rdf4j Server, you need to take the following into account.</p>

<h3 id="server-url-change">Server URL change</h3>

<p>The default server URL for the Rdf4j Server is <code>http://localhost:8080/Rdf4j-server</code>. This is different from the default server URL for Sesame Server, which was <code>http://localhost:8080/openrdf-sesame</code>.</p>

<h3 id="migrating-your-data-server-data-directory-change">Migrating your data: Server Data Directory change</h3>

<p>Sesame Server by default stores its data (configuration, log files, as well as the actual databases) in a directory <code>%APPDATA%\Aduna\OpenRDF Sesame</code> (on Windows), <code>$HOME/.aduna/openrdf-sesame</code> (on Linux), or <code>$HOME/Library/Application Support/Aduna/OpenRDF Sesame</code> (on Mac OSX).</p>

<p>Rdf4j server stores its data in a different location: <code>%APPDATA%\RDF4J\Server</code> (Windows), <code>$HOME/.RDF4J/Server</code> (Linux), or <code>$HOME/Library/Application Support/RDF4J/Server</code> (on Mac OSX). Please note that Rdf4j Server will not automatically detect existing data from an old Sesame Server installation.</p>

<p>This means that if you wish to migrate your data, you will have to manually copy over the data. This can be done quite easily as follows:</p>

<ol>
<li>Start your new Rdf4j Server instance, make sure it creates its initial data directory, then stop it again;</li>
<li>Stop your old Sesame Server;</li>
<li>Delete the Rdf4j/Server/repositories subdirectory that was just created by Rdf4j Server;</li>
<li>Copy the repositories directory from your old Sesame Server installation to replace the directory you deleted in the previous step;</li>
<li>Restart Rdf4j Server.</li>
</ol>

<h2 id="upgrading-to-rdf4j-workbench">Upgrading to Rdf4j Workbench</h2>

<p>Like Rdf4j Server, Rdf4j Workbench also uses a different data directory from its predecessor. The only thing Rdf4j Workbench stores in its data directory is saved queries, so if you haven’t used this functionality you can safely skip this.</p>

<p>To migrate your saved queries from Sesame Workbench to Rdf4j Workbench, do the following:</p>

<ol>
<li>Start your new Rdf4j Workbench instance, make sure it creates its initial data directory, then stop it again;</li>
<li>Stop your old Sesame Workbench;</li>
<li>Delete the Rdf4j/Workbench/queries subdirectory that was just created by Rdf4j Workbench;</li>
<li>Copy the queries directory from your old Sesame Workbench installation to replace the directory you deleted in the previous step;</li>
<li>Restart Rdf4j Workbench.</li>
</ol>

<h1 id="migrating-from-sesame-2">Migrating from Sesame 2</h1>

<p>Rdf4j is based on the Sesame 4 code base, which is a major new release of the framework with significant changes in its core APIs, compared to Sesame 2. Here we give a quick overview of the major changes that you will need to take into account (in addition to the changes documented in the previous sections) when upgrading your project from Sesame 2 to Rdf4j.</p>

<h2 id="rdf4j-2-0-requires-java-8">Rdf4j 2.0 requires Java 8</h2>

<p>If you use Sesame components in your own Java application and you wish to upgrade, you will have to make sure you are using a Java 8 compiler and runtime environment.</p>

<p>If you are using the Sesame Server and/or Sesame Workbench applications, you will need to upgrade the Java Runtime Environment (JRE) to Java 8 before upgrading to the new versions.</p>

<p>If you, for whatever reason, really can not upgrade to Java 8, you can use Rdf4j 1.0, instead of 2.0. Rdf4j 1.0 is a backport of the Rdf4j code compatible with Java 7. However, to be clear: Rdf4j 1.0 is not identical to Sesame 2! Many of the changes described here for Rdf4j 2.0 also hold for Rdf4j 1.0 – we merely adapted the code to take out Java 8-specific features such as Optionals and lambda expressions.</p>

<h2 id="statement-equals-method-now-includes-context">Statement equals method now includes context</h2>

<p>In Sesame 2, the method <code>Statement.equals()</code> was defined to consider two statements equal if their subject, predicate, and object were identical, disregarding any context information. In Rdf4j, this was changed: the context field is now included in the equality check.  As an example of what this means, see the following code:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  Statement st1 <span style="color:#000;font-weight:bold">=</span> vf<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createStatement</span><span style="color:#000;font-weight:bold">(</span>s1<span style="color:#000;font-weight:bold">,</span> p1<span style="color:#000;font-weight:bold">,</span> o1<span style="color:#000;font-weight:bold">);</span>
  Statement st2 <span style="color:#000;font-weight:bold">=</span> vf<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createStatement</span><span style="color:#000;font-weight:bold">(</span>s1<span style="color:#000;font-weight:bold">,</span> p1<span style="color:#000;font-weight:bold">,</span> o1<span style="color:#000;font-weight:bold">,</span> c1<span style="color:#000;font-weight:bold">);</span>
  System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>st1<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>st2<span style="color:#000;font-weight:bold">));</span></code></pre></div>

<p>In Sesame 2, the above code would print out <code>true</code>. In Rdf4j, it prints out <code>false</code>.</p>

<h2 id="use-of-java-util-optional-in-model-api">Use of <code>java.util.Optional</code> in Model API</h2>

<p>In several places in the Model API, Rdf4j (2.0) uses <code>java.util.Optional</code> return types, where it previously returned either some value or <code>null</code>.</p>

<p>As one example of this, <code>Literal.getLanguage()</code>, which return the language tag of an RDF literal (if any is defined) now has <code>Optional&lt;String&gt;</code> as its return type, instead of just <code>String</code>. As a consequence, if you previously had code that retrieved the language tag like this:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  String languageTag <span style="color:#000;font-weight:bold">=</span> literal<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getLanguage</span><span style="color:#000;font-weight:bold">();</span> 
  <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>languageTag <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;literal language tag is &#34;</span> <span style="color:#000;font-weight:bold">+</span> languageTag<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>You will need to modify slightly, for example, like this:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  String languageTag <span style="color:#000;font-weight:bold">=</span> literal<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getLanguage</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">orElse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">);</span> 
  <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>languageTag <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;literal language tag is &#34;</span> <span style="color:#000;font-weight:bold">+</span> languageTag<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>Or more drastically:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  literal<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getLanguage</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">ifPresent</span><span style="color:#000;font-weight:bold">(</span>tag <span style="color:#000;font-weight:bold">-&gt;</span> System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;literal language tag is &#34;</span> <span style="color:#000;font-weight:bold">+</span> tag<span style="color:#000;font-weight:bold">));</span></code></pre></div>

<p>For more information about how to effectively make use of Optional, see this article by Oracle.</p>

<h2 id="rdbms-sail-removed">RDBMS Sail removed</h2>

<p>The RDBMS Sail (that is, Sesame storage support for PostgreSQL and MySQL), which was deprecated since Sesame release 2.7.0, has been completely removed in Rdf4j. If you were still using this storage backend as part of your project, you will need to switch to a different database type before upgrading or look into third-party implementations that may still support those databases.</p>

<h2 id="deprecation-deprecation-deprecation">Deprecation, Deprecation, Deprecation</h2>

<p>Since Sesame 2, we have cleaned up interfaces, renamed methods and classes, and just generally streamlined a lot of stuff. In most cases we have done this in a way that is backward-compatible: old class/method/interface names have been preserved and can still be used, so you will not immediately need to completely change your code.</p>

<p>However, they have been marked deprecated. This means that we intend to drop support for these older names in future Rdf4j releases. In every case, however, we have extensively documented what you should do in the API Javadoc: each deprecated method or class points to the new alternative that you should be using. Upgrade at your leisure, just remember: better sooner than later.</p>

<h2 id="api-changes-in-rdf4j-compared-to-sesame-2">API Changes in Rdf4j compared to Sesame 2</h2>

<p>Compared to Sesame 2, Rdf4j is a significantly improved version of the framework. Several of the core APIs and interfaces have been improved to make them easier to use, and to make full use of Java <sup>7</sup>&frasl;<sub>8</sub> features. Here, we outline some of these improvements in more detail.</p>

<h3 id="unchecked-exceptions">Unchecked Exceptions</h3>

<p>All exceptions thrown by Rdf4j are unchecked: they all inherit from <code>java.lang.RuntimeException</code>. This means that you as a developer you are now longer forced to catch (or throw) any exceptions that inherit from <code>org.eclipse.rdf4j.RDF4JException</code>, such as <code>RepositoryException</code>, <code>QueryEvaluationException</code>, or <code>RDFParseException</code> .</p>

<p>Of course, you still can catch these exceptions if you want, but it means that in cases where you as a programmer are certain that an exception would never occur in practice, you can just ignore the exception, instead of having to write verbose <code>try-catch-finally</code> blocks everywhere. In other words: we are shifting the responsibility to you as a programmer to take care you write robust code. Be assured that all exceptions that can be thrown will still be properly documented in the Javadoc.</p>

<h3 id="autocloseable-results-and-connections"><code>AutoCloseable</code> results and connections</h3>

<p>In Rdf4j, all instances of both <code>CloseableIteration</code> (the root interface of all query result types, including resource and statement iterators, SPARQL query results) and <code>RepositoryConnectio</code>n (the interface for communicating with a <code>Repository</code>) inherit from <code>java.lang.AutoCloseable</code>.</p>

<p>This means that instead of explicitly having to call the <code>close()</code> method on these resources when you’re done with them, you can now use the so-called <code>try-with-resources</code> construction. For example, instead of:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  RepositoryConnection conn <span style="color:#000;font-weight:bold">=</span> repo<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getConnection</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#998;font-style:italic">// do something with the connection here
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">finally</span> <span style="color:#000;font-weight:bold">{</span>
      conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">close</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>You can now do:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">(</span>RepositoryConnection conn <span style="color:#000;font-weight:bold">=</span> repo<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getConnection</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#998;font-style:italic">// do something with the connection
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<h3 id="use-of-long-instead-of-int-for-parser-line-and-column-references">Use of long instead of int for parser line and column references</h3>

<p>The <code>ParseErrorListener</code> and <code>ParseLocationListener</code> parser interfaces, and the <code>QueryResultParseException</code> and <code>RDFParseException</code> exception classes, now accept and return <code>long</code> instead of <code>int</code>. This enables the parsing of much larger files without being concerned about numeric overflow in tracking.</p>

<h3 id="fluent-apis-for-rdfparser-and-queryresultparser">Fluent APIs for RDFParser and QueryResultParser</h3>

<p>The <code>RDFParser</code> and <code>QueryResultParser</code> APIs have been enhanced to provide fluent construction and configuration:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  Model rdfStatements <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> LinkedHashModel<span style="color:#000;font-weight:bold">();</span>
  ParseErrorCollector errorCollector <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ParseErrorCollector<span style="color:#000;font-weight:bold">();</span>
  RDFParser aParser <span style="color:#000;font-weight:bold">=</span> Rio<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createParser</span><span style="color:#000;font-weight:bold">(</span>RDFFormat<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">TURTLE</span><span style="color:#000;font-weight:bold">)</span>
                                 <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setRDFHandler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> StatementCollector<span style="color:#000;font-weight:bold">(</span>rdfStatements<span style="color:#000;font-weight:bold">))</span>
                                 <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setParseErrorListener</span><span style="color:#000;font-weight:bold">(</span>errorCollector<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
      aParser<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">parse</span><span style="color:#000;font-weight:bold">(</span>myInputStream<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>RDFParseException e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#998;font-style:italic">// log or rethrow RDFParseException
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">finally</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#998;font-style:italic">// Examine any parse errors that occurred before moving on
</span><span style="color:#998;font-style:italic"></span>      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;There were &#34;</span> 
              <span style="color:#000;font-weight:bold">+</span> errorCollector<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getWarnings</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()</span> 
              <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; warnings during parsing&#34;</span><span style="color:#000;font-weight:bold">);</span>
      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;There were &#34;</span> 
              <span style="color:#000;font-weight:bold">+</span> errorCollector<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getErrors</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()</span> 
              <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; errors during parsing&#34;</span><span style="color:#000;font-weight:bold">);</span>
      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;There were &#34;</span> 
              <span style="color:#000;font-weight:bold">+</span> errorCollector<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getFatalErrors</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()</span> 
              <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; fatal errors during parsing&#34;</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span>

  QueryResultCollector handler <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> QueryResultCollector<span style="color:#000;font-weight:bold">();</span>
  ParseErrorCollector errorCollector <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ParseErrorCollector<span style="color:#000;font-weight:bold">();</span>
  QueryResultParser aParser <span style="color:#000;font-weight:bold">=</span> QueryResultIO<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createTupleParser</span><span style="color:#000;font-weight:bold">(</span>TupleQueryResultFormat<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">SPARQL</span><span style="color:#000;font-weight:bold">)</span>
                                         <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setQueryResultHandler</span><span style="color:#000;font-weight:bold">(</span>handler<span style="color:#000;font-weight:bold">)</span>
                                         <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setParseErrorListener</span><span style="color:#000;font-weight:bold">(</span>errorCollector<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
      aParser<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">parseQueryResult</span><span style="color:#000;font-weight:bold">(</span>myInputStream<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>QueryResultParseException e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#998;font-style:italic">// log or rethrow QueryResultParseException
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">finally</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#998;font-style:italic">// Optionally examine any parse errors that occurred before moving on
</span><span style="color:#998;font-style:italic"></span>      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;There were &#34;</span> 
              <span style="color:#000;font-weight:bold">+</span> errorCollector<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getWarnings</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()</span> 
              <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; warnings during parsing&#34;</span><span style="color:#000;font-weight:bold">);</span>
      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;There were &#34;</span> 
              <span style="color:#000;font-weight:bold">+</span> errorCollector<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getErrors</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()</span> 
              <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; errors during parsing&#34;</span><span style="color:#000;font-weight:bold">);</span>
      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;There were &#34;</span> 
              <span style="color:#000;font-weight:bold">+</span> errorCollector<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getFatalErrors</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()</span> 
              <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; fatal errors during parsing&#34;</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>The <code>QueryResultParser</code> has also been updated to allow many of the operations that <code>RDFParser</code> allows including methods such as <code>setParseErrorListener</code> and <code>setParseLocationListener</code>, and the set method that is a shortcut for <code>getParserConfig().set</code>. Although <code>RDFParser</code> and <code>QueryResultParser</code> are still distinct at this point, in the future they may either be merged or have a common ancestor and these changes are aimed at making that process smoother for both developers and users.</p>

<h3 id="lambdas-and-the-stream-api-rdf4j-2-0-only">Lambdas and the Stream API (RDF4J 2.0 only)</h3>

<p>Java 8 offers two powerful new features in the core language: lambda expressions, and the Stream API. Rdf4j 2.0 offers a number of improvements and new utilities that allow you to leverage these features. In this section we show a few simple usage examples of these new utilities.</p>

<h4 id="stream-based-processing-of-results">Stream-based processing of results</h4>

<p>In Rdf4j,  results from queries (or from any Repository API retrieval operation) are returned in a lazily-evaluating iterator-like object named a <code>CloseableIteration</code>. It has specific subclasses (such as <code>RepositoryResult</code>, <code>GraphQueryResult</code>, and <code>TupleQueryResult</code>), but the basis for them all is identical. Rdf4j 2.0 offers a number of ways to more easily interact with such results, by converting the source iteration to a Stream object.</p>

<p>For example, when post-processing the result of a SPARQL CONSTRUCT query (for example to filter out all triples with ‘a’ as the subject), the classic way to do it would be something like this:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  GraphQuery gq <span style="color:#000;font-weight:bold">=</span> conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">prepareGraphQuery</span><span style="color:#000;font-weight:bold">(</span>QueryLanguage<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">SPARQL</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#d14">&#34;CONSTRUCT ... &#34;</span><span style="color:#000;font-weight:bold">);</span>
  GraphQueryResult gqr <span style="color:#000;font-weight:bold">=</span> gq<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">evaluate</span><span style="color:#000;font-weight:bold">();</span>
  List<span style="color:#000;font-weight:bold">&lt;</span>Statement<span style="color:#000;font-weight:bold">&gt;</span> aboutA <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;</span>Statement<span style="color:#000;font-weight:bold">&gt;();</span>
  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">while</span> <span style="color:#000;font-weight:bold">(</span>gqr<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">hasNext</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
        Statement st <span style="color:#000;font-weight:bold">=</span> grq<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">next</span><span style="color:#000;font-weight:bold">();</span>
        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>st<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getSubject</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>a<span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
              aboutA<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>st<span style="color:#000;font-weight:bold">);</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">finally</span> <span style="color:#000;font-weight:bold">{</span>
     gqr<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">close</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>In Rdf4j, we can do this shorter, and more elegantly, using the new <code>QueryResults.stream()</code> method and its support for lambda-expressions:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  GraphQuery gq <span style="color:#000;font-weight:bold">=</span> conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">prepareGraphQuery</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;CONSTRUCT ... &#34;</span><span style="color:#000;font-weight:bold">);</span>
  GraphQueryResult gqr <span style="color:#000;font-weight:bold">=</span> gq<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">evaluate</span><span style="color:#000;font-weight:bold">();</span>
  List<span style="color:#000;font-weight:bold">&lt;</span>Statement<span style="color:#000;font-weight:bold">&gt;</span> aboutA <span style="color:#000;font-weight:bold">=</span> QueryResults<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">stream</span><span style="color:#000;font-weight:bold">(</span>gqr<span style="color:#000;font-weight:bold">)</span>
                     <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">filter</span><span style="color:#000;font-weight:bold">(</span>s <span style="color:#000;font-weight:bold">-&gt;</span> s<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getSubject</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>a<span style="color:#000;font-weight:bold">))</span>
                     <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>Collectors<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toList</span><span style="color:#000;font-weight:bold">());</span></code></pre></div>

<p>Note that by using <code>QueryResults.stream()</code> instead of manually iterating over our result, we no longer have to worry about closing the query result when we’re done with it, either: the provided Stream automatically takes care of this when it is either fully exhausted or when some exception occurs.</p>

<p>The same trick also works for results of SELECT queries:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  TupleQuery query <span style="color:#000;font-weight:bold">=</span> conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">prepareTupleQuery</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SELECT ?x ?c WHERE { ... } &#34;</span><span style="color:#000;font-weight:bold">);</span>
  TupleQueryResult result <span style="color:#000;font-weight:bold">=</span> query<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">evaluate</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#998;font-style:italic">// only get those results where c is equal to foaf:Person
</span><span style="color:#998;font-style:italic"></span>  List<span style="color:#000;font-weight:bold">&lt;</span>BindingSet<span style="color:#000;font-weight:bold">&gt;</span> filteredResults <span style="color:#000;font-weight:bold">=</span> QueryResults<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">stream</span><span style="color:#000;font-weight:bold">(</span>result<span style="color:#000;font-weight:bold">)</span>
                        <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">filter</span><span style="color:#000;font-weight:bold">(</span>bs <span style="color:#000;font-weight:bold">-&gt;</span> bs<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;c&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>FOAF<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">PERSON</span><span style="color:#000;font-weight:bold">))</span>
                        <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>Collectors<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toList</span><span style="color:#000;font-weight:bold">());</span></code></pre></div>

<h4 id="stream-based-querying-and-transaction-handling">Stream-based querying and transaction handling</h4>

<p>In addition to additional Stream-based utilities for results, Rdf4j also offers various utilities for more convenient handling of queries and transactions, by means of the <code>Repositories</code> utility class.</p>

<p>As a simple example, suppose we want to open a connection, fire off a SPARQL CONSTRUCT query, collect the results in a <code>Model</code>, and then close the connection. The ‘classic’ way to do this is as follows:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  RepositoryConnection conn <span style="color:#000;font-weight:bold">=</span> rep<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getConnection</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
     GraphQuery query <span style="color:#000;font-weight:bold">=</span> conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">prepareGraphQuery</span><span style="color:#000;font-weight:bold">(</span>QueryLanguage<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">SPARQL</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#d14">&#34;CONSTRUCT WHERE {?s ?p ?o }&#34;</span><span style="color:#000;font-weight:bold">);</span>
     Model results <span style="color:#000;font-weight:bold">=</span> QueryResults<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">asModel</span><span style="color:#000;font-weight:bold">(</span>query<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">evaluate</span><span style="color:#000;font-weight:bold">());</span>
  <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">finally</span> <span style="color:#000;font-weight:bold">{</span>
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">close</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>Using Rdf4j lambda/Stream support, we can now do all of this in a single line of code:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  Model results <span style="color:#000;font-weight:bold">=</span> Repositories<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">graphQuery</span><span style="color:#000;font-weight:bold">(</span>rep<span style="color:#000;font-weight:bold">,</span> <span style="color:#d14">&#34;CONSTRUCT WHERE {?s ?p ?o} &#34;</span><span style="color:#000;font-weight:bold">,</span> 
                   gqr <span style="color:#000;font-weight:bold">-&gt;</span> QueryResults<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">asModel</span><span style="color:#000;font-weight:bold">(</span>gqr<span style="color:#000;font-weight:bold">));</span></code></pre></div>

<p>Note that although in this example we only do some very basic processing on the result (we convert the result of the query to a Model object), we can write an arbitrarily complex function here to fully customize how the result is processed, and fully control the type of the returned object as well.</p>

<p>The <code>Repositories</code> utility really comes into its own when used for update transactions. It takes care of opening a connection, starting a transaction, and properly committing (or rolling back if an error occurs).</p>

<p>As an example, this is the ‘classic’ way to add two new statements to the repository, using a single transaction:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  RepositoryConnection conn <span style="color:#000;font-weight:bold">=</span> rep<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getConnection</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">begin</span><span style="color:#000;font-weight:bold">();</span>
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>st1<span style="color:#000;font-weight:bold">);</span>
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>st2<span style="color:#000;font-weight:bold">);</span>  
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">commit</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>RepositoryException e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">rollback</span><span style="color:#000;font-weight:bold">();</span>
     <span style="color:#000;font-weight:bold">throw</span> e<span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">finally</span> <span style="color:#000;font-weight:bold">{</span>
     conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">close</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">}</span></code></pre></div>

<p>And this is the new lambda-based equivalent:</p>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  Repositories<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">consume</span><span style="color:#000;font-weight:bold">(</span>rep<span style="color:#000;font-weight:bold">,</span> conn <span style="color:#000;font-weight:bold">-&gt;</span> <span style="color:#000;font-weight:bold">{</span> 
      conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>st1<span style="color:#000;font-weight:bold">);</span> 
      conn<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>st2<span style="color:#000;font-weight:bold">);</span> 
  <span style="color:#000;font-weight:bold">});</span></code></pre></div>
  
        
      </div>
      <div class="col-md-6  padding-bottom-30 padding-top-10">
        <b>Table of Contents</b>
        <nav id="TableOfContents">
<ul>
<li><a href="#sesame-to-eclipse-rdf4j-migration-guide">Sesame to Eclipse rdf4j migration guide</a></li>
<li><a href="#migrating-from-sesame-4">Migrating from Sesame 4</a>
<ul>
<li><a href="#changes-for-java-programmers">Changes for Java Programmers</a>
<ul>
<li><a href="#maven-artifacts">Maven artifacts</a></li>
<li><a href="#package-renaming">Package renaming</a></li>
</ul></li>
<li><a href="#upgrading-sesame-server-to-rdf4j-server">Upgrading Sesame Server to Rdf4j Server</a>
<ul>
<li><a href="#server-url-change">Server URL change</a></li>
<li><a href="#migrating-your-data-server-data-directory-change">Migrating your data: Server Data Directory change</a></li>
</ul></li>
<li><a href="#upgrading-to-rdf4j-workbench">Upgrading to Rdf4j Workbench</a></li>
</ul></li>
<li><a href="#migrating-from-sesame-2">Migrating from Sesame 2</a>
<ul>
<li><a href="#rdf4j-2-0-requires-java-8">Rdf4j 2.0 requires Java 8</a></li>
<li><a href="#statement-equals-method-now-includes-context">Statement equals method now includes context</a></li>
<li><a href="#use-of-java-util-optional-in-model-api">Use of <code>java.util.Optional</code> in Model API</a></li>
<li><a href="#rdbms-sail-removed">RDBMS Sail removed</a></li>
<li><a href="#deprecation-deprecation-deprecation">Deprecation, Deprecation, Deprecation</a></li>
<li><a href="#api-changes-in-rdf4j-compared-to-sesame-2">API Changes in Rdf4j compared to Sesame 2</a>
<ul>
<li><a href="#unchecked-exceptions">Unchecked Exceptions</a></li>
<li><a href="#autocloseable-results-and-connections"><code>AutoCloseable</code> results and connections</a></li>
<li><a href="#use-of-long-instead-of-int-for-parser-line-and-column-references">Use of long instead of int for parser line and column references</a></li>
<li><a href="#fluent-apis-for-rdfparser-and-queryresultparser">Fluent APIs for RDFParser and QueryResultParser</a></li>
<li><a href="#lambdas-and-the-stream-api-rdf4j-2-0-only">Lambdas and the Stream API (RDF4J 2.0 only)</a>
<ul>
<li><a href="#stream-based-processing-of-results">Stream-based processing of results</a></li>
<li><a href="#stream-based-querying-and-transaction-handling">Stream-based querying and transaction handling</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </div>
    </div>
    
  </div>
</main>

  
  
<p id="back-to-top">
  <a class="visible-xs" href="#top">Back to the top</a>
</p>
<footer id="solstice-footer">
  <div class="container">
    <div class="row">
      <section class="col-sm-6 hidden-print" id="footer-eclipse-foundation">
        <h2 class="section-title">Eclipse Foundation</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/org/">About Us</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/contact.php">Contact Us</a></li>
          <li><a href="https://www.eclipse.org/donate">Donate</a></li>
          <li><a href="https://www.eclipse.org/org/documents/">Governance</a></li>
          <li><a href="https://www.eclipse.org/artwork/">Logo and Artwork</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/directors.php">Board of Directors</a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-legal">
        <h2 class="section-title">Legal</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="https://www.eclipse.org/org/documents/edl-v10.php">Eclipse Distribution License</a></li>
          <li><a href="https://www.eclipse.org/legal/">Legal Resources </a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-useful-links">
        <h2 class="section-title">Useful Links</h2>
        <ul class="nav">
          <li><a href="https://github.com/eclipse/rdf4j/issues/">Report a Bug</a></li>
          <li><a href="/documentation/">Documentation</a></li>
          <li><a href="https://github.com/eclipse/rdf4j/blob/master/.github/CONTRIBUTING.md">How to Contribute</a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-other">
        <h2 class="section-title">Other</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/ide/">IDE and Tools</a></li>
          <li><a href="https://www.eclipse.org/projects">Community of Projects</a></li>
          <li><a href="https://www.eclipse.org/org/workinggroups/">Working Groups</a></li>
          <li><a href="https://www.eclipse.org/org/research/">Research@Eclipse</a></li>
          <li><a href="https://status.eclipse.org">Service Status</a></li>
        </ul>
      </section>
      <div class="col-sm-24 margin-top-20">
        <div class="row">
          <div id="copyright" class="col-md-16">
            <p id="copyright-text">Copyright &copy; Eclipse Foundation, Inc. All Rights Reserved.</p>
          </div>
          
        </div>
      </div>
      <a href="#" class="scrollup">Back to the top</a>
    </div>
  </div>
</footer>

<script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/main.min.js"></script>

</body>
</html>

  
</body>
</html>

